# 校园二手交易平台项目需求分析文档

## 1. 引言

### 1.1. 项目背景
当前校园内，学生和教职工之间存在大量闲置物品交易的需求，但缺乏一个官方的、可信的、集中的信息平台。交易往往通过零散的社交群组或论坛进行，存在信息不透明、交易无保障、效率低下等问题。为了解决这些痛点，促进校园内的资源循环利用，并为师生提供一个安全便捷的交易环境，我们提出开发此校园二手交易平台。

### 1.2. 项目目标
- **近期目标**: 建立一个功能完善、运行稳定的二手交易系统，满足师生发布、浏览、搜索、沟通和交易二手物品的基本需求。通过学号激活机制，确保用户身份的真实性。
- **长期目标**: 打造一个活跃、可信的校园内部经济生态圈，引入信用评价体系，并逐步扩展服务，成为校园生活不可或缺的一部分。

### 1.3. 目标用户
| 用户角色 | 描述 |
| :--- | :--- |
| **学生/教职工** | 系统的主要使用者，作为买家或卖家参与二手交易。 |
| **平台管理员** | 由超级管理员指定，负责日常运营，如内容审核、处理举报等。 |
| **超级管理员** | 系统最高权限拥有者，负责核心管理，如任命管理员。 |

---

## 2. 总体描述

### 2.1. 产品愿景
本产品旨在成为一个专属、高效、可信的校园二手物品交易平台，让每一件闲置物品都能轻松找到新主人，让每一次交易都简单而放心。

### 2.2. 功能摘要
系统核心功能包括用户认证与管理、商品发布与管理、商品搜索与浏览、用户交互（评论、私信、收藏、举报）以及信用评价体系。此外，系统还提供一个强大的后台，供管理员进行内容审核和平台维护。

### 2.3. 约束与假设
- **平台约束**: 本项目初期将作为Web应用开发，需在主流现代浏览器（Chrome, Firefox, Safari, Edge）上良好运行。
- **技术约束**: 前后端分离架构，通过本文档后续定义的API进行通信。所有接口仅使用`GET`和`POST`方法。
- **身份假设**: 假设校方能够提供一份包含全校师生"学工号"和"姓名"的基础数据表，用于系统的初始化和激活码的生成。

---

## 3. 功能性需求

### 3.1. 用户与认证模块 (FR-USER)

- **FR-USER-01: 用户角色定义**
  - 系统应包含四种角色：未认证用户、认证用户、管理员、超级管理员。
  - 各角色的权限需严格按照《功能介绍文档》2.1节的定义执行。

- **FR-USER-02: 账号激活**
  - 系统应允许用户通过"学工号 + 姓名 + 唯一激活码"来激活账号。
  - 激活时，用户必须设置登录密码和昵称。
  - 激活成功后，用户状态自动转为"认证用户"。

- **FR-USER-03: 用户登录**
  - 系统应提供两种登录方式：
    1. **认证登录**: 已激活用户使用"学工号 + 密码"登录。
    2. **游客登录**: 未激活用户使用"学工号 + 姓名"登录，其角色为"未认证用户"。
  - 登录成功后，系统需返回一个用于后续请求认证的Token。

- **FR-USER-04: 密码重置**
  - 系统应为忘记密码的用户提供重置功能。
  - 用户可通过输入学工号请求发送密码重置码（需关联到预留的联系方式）。
  - 用户可使用有效的重置码来设置新的登录密码。

- **FR-USER-05: 个人信息管理**
  - 认证用户应能查看并修改自己的个人资料，如昵称、联系方式。
  - 用户应能查看自己发布的商品列表、收藏列表、私信和信用评价。

### 3.2. 商品模块 (FR-PRODUCT)

- **FR-PRODUCT-01: 商品发布**
  - 只有认证用户才能发布商品。
  - 发布时必须填写商品名称、描述、价格、分类和联系方式。
  - 用户可选择上传一张或多张商品图片。
  - 新发布的商品状态默认为"在售"。

- **FR-PRODUCT-02: 商品浏览与搜索**
  - 所有用户均可浏览商品列表。
  - 系统应支持按商品分类进行筛选。
  - 系统应支持按关键词对商品标题和描述进行模糊搜索。
  - 系统应支持按发布时间或价格对结果进行排序。

- **FR-PRODUCT-03: 商品状态管理**
  - 商品发布者应能将自己商品的状体从"在售"修改为"已售出"。
  - 商品状态变更为"已售出"后，应触发信用评价流程。

- **FR-PRODUCT-04: 商品收藏**
  - 认证用户可将感兴趣的商品加入收藏夹。
  - 用户可在个人中心查看自己的收藏列表，并能从中移除商品。

### 3.3. 交互模块 (FR-INTERACTION)

- **FR-INTERACTION-01: 评论**
  - 认证用户可对任意商品发表评论。
  - 用户可以删除自己的评论。

- **FR-INTERACTION-02: 私信**
  - 认证用户之间可通过站内私信进行一对一沟通。
  - 用户应能收到新私信的提醒。

- **FR-INTERACTION-03: 举报**
  - 认证用户可对涉嫌违规的商品或评论进行举报。
  - 举报时需填写举报原因。

- **FR-INTERACTION-04: 信用评价**
  - 当一笔交易完成（商品被标记为"已售出"）后，系统应允许买卖双方相互评价。
  - 评价可分为等级（如：好/中/差评）和文字评论。
  - 用户的信用评价记录应对其他用户可见。

### 3.4. 后台管理模块 (FR-ADMIN)

- **FR-ADMIN-01: 内容管理**
  - 管理员应能下架任意商品、删除任意评论。
- **FR-ADMIN-02: 分类管理**
  - 管理员应能对商品分类进行增加、删除、修改。
- **FR-ADMIN-03: 举报管理**
  - 管理员应能查看所有举报记录，并对其进行处理。
- **FR-ADMIN-04: 用户权限管理**
  - 超级管理员应能将"认证用户"提升为"管理员"，或将"管理员"降级。

---

## 4. 非功能性需求

- **NFR-01: 性能需求**
  - API接口在正常负载下，95%的请求响应时间应小于500ms。
  - 页面首次加载时间（LCP）应在2.5秒以内。
- **NFR-02: 安全性需求**
  - 用户密码必须经过加盐哈希（Salted Hash）处理后存储。
  - 所有用户输入在展示到前端页面时，必须进行转义，防止XSS攻击。
  - API需具备基础的防暴力破解机制（如登录尝试次数限制）。
- **NFR-03: 可用性需求**
  - 系统界面设计应简洁明了，易于上手。
  - Web界面应采用响应式设计，适配桌面和移动设备的主流屏幕尺寸。
- **NFR-04: 可靠性需求**
  - 系统应保证7x24小时可用，年可用性不低于99.5%。
  - 核心用户数据和交易数据需要有定期的备份机制。

---

## 5. 接口需求

### 5.1. 用户界面 (UI)
- 界面整体风格应现代化、简洁。
- 交互流程应直观，符合主流电商应用的用户习惯。

### 5.2. 软件接口 (API)
- 前端与后端的通信必须且只能通过已定义的API接口进行。
- API的具体设计细节，详见《API接口文档.md》。

---

## 6. 前端页面需求规划 (FR-UI)

根据项目功能及API接口，前端需开发以下页面视图。

### 6.1. 前台核心页面
| 页面名称 | 视图组件名 (建议) | 主要功能 | 关联API |
| :--- | :--- | :--- | :--- |
| **首页** | `HomeView.vue` | 商品瀑布流/列表，集成搜索、分类、排序功能。 | `GET /api/products` |
| **商品详情页** | `ProductDetailView.vue` | 展示商品完整信息、图片、卖家信息、评论区。 | `GET /api/products/{id}`, `GET /api/products/{id}/comments` |
| **登录与激活页** | `LoginView.vue` | 集成"认证登录"、"游客登录"、"账号激活"三个表单。 | `POST /api/auth/login`, `POST /api/auth/activate` |
| **密码重置页** | `ForgotPasswordView.vue` | 提供忘记密码找回功能。 | `POST /api/auth/forgot-password/*` |
| **用户公共主页** | `UserProfileView.vue` | 展示指定用户的公开信息、发布过的商品和信用评价。 | `GET /api/users/{id}/products`, `GET /api/users/{id}/ratings` |

### 6.2. 个人中心页面 (需认证)
| 页面名称 | 视图组件名 (建议) | 主要功能 | 关联API |
| :--- | :--- | :--- | :--- |
| **个人中心布局** | `UserCenterLayout.vue` | 包含侧边导航和内容区域的框架页。 | - |
| **我的发布页** | `MyProductsView.vue` | 管理自己发布的商品（编辑、删除、更新状态）。 | `GET /api/users/me/products` |
| **发布/编辑商品页**| `ProductEditView.vue` | 用于新建或修改商品的表单页。 | `POST /api/products/create`, `POST /api/products/{id}/update` |
| **我的收藏页** | `MyFavoritesView.vue`| 展示收藏的商品列表。 | `GET /api/users/me/favorites` |
| **我的私信页** | `MyMessagesView.vue` | 私信会话列表和聊天记录。 | `GET /api/messages`, `GET /api/messages/{userId}` |
| **我的通知页** | `MyNotificationsView.vue`| 查看系统通知。 | `GET /api/notifications`, `POST /api/notifications/read` |
| **个人资料编辑页**| `ProfileEditView.vue`| 修改昵称、联系方式等。 | `GET /api/users/me`, `POST /api/users/me/update` |

### 6.3. 后台管理页面 (需管理员权限)
| 页面名称 | 视图组件名 (建议) | 主要功能 | 关联API |
| :--- | :--- | :--- | :--- |
| **后台管理布局** | `AdminLayout.vue` | 后台所有页面的框架，含后台导航。 | - |
| **数据看板** | `DashboardView.vue` | 以图表展示平台关键运营数据。 | `GET /api/admin/stats` |
| **用户管理页** | `UserManagementView.vue` | 表格展示所有用户，并管理其权限。 | `GET /api/admin/users`, `POST /api/admin/users/{id}/role/update` |
| **商品管理页** | `ProductManagementView.vue` | 表格展示所有商品，并进行管理。 | `GET /api/admin/products`, `POST /api/admin/products/{id}/delete`|
| **分类管理页** | `CategoryManagementView.vue`| 管理商品分类的增删改查。 | `GET /api/categories`, `POST /api/admin/categories/*` |
| **举报管理页** | `ReportManagementView.vue`| 查看并处理用户举报。 | `GET /api/admin/reports`, `POST /api/admin/reports/{id}/process`| 